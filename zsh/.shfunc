#! /usr/bin/bash

function source {
  ensure_zcompiled $1
  builtin source $1
}
function ensure_zcompiled {
  local compiled="$1.zwc"
  if [[ ! -r "$compiled" || "$1" -nt "$compiled" ]]; then
    echo "Compiling $1"
    zcompile $1
  fi
}
ensure_zcompiled ~/.zshrc
alias .='source'

_prj() {
  _path_files -W "$PROJECTS_DIR" -/
}
compdef _prj prj

shfunc_help() {
    cat <<EOS
- prj [project-name] ... Go to the project with project-name. If project-name is not specified, you will be redirected to a directory with many projects.
- prjs ... Show project list.
EOS
}

